# CMake project file for CMake

cmake_minimum_required (VERSION 3.15)
project (cfgio) 
enable_language (CXX)

set (library_name "cfgio_${arch}" )

#set source directory
set (source_directory ${CMAKE_CURRENT_SOURCE_DIR})

#Include the CMake configuration file
include ( CMake_arch/CMake_${arch}.cmake )

set(CMAKE_LIBRARY_OUTPUT_DIRECTORY "${open_reader_root_dir}/${build_dir}/libopen_reader/${arch}" )
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY "${open_reader_root_dir}/${build_dir}/libopen_reader/${arch}" )

# Add includes for project
include ( ${open_reader_root_dir}/CMake_arch/CMake_includes.cmake )

#CPP source files
file(GLOB_RECURSE cpp_source_files ${source_directory}/*.cpp  ${source_directory}/*.cxx )

#C Source files
file(GLOB_RECURSE c_source_files ${source_directory}/*.c )

#
# compiler Flags
# --------------
set (CMAKE_Fortran_FLAGS_DEBUG " " )
set (CMAKE_Fortran_FLAGS_RELEASE " " )
set (CMAKE_Fortran_FLAGS " " )

set (CMAKE_C_FLAGS_DEBUG " " )
set (CMAKE_C_FLAGS_RELEASE " " )
set (CMAKE_C_FLAGS " " )

set (CMAKE_CPP_FLAGS_DEBUG " " )
set (CMAKE_CPP_FLAGS_RELEASE " " )
set (CMAKE_CPP_FLAGS " " )

set (CMAKE_CXX_FLAGS_DEBUG " " )
set (CMAKE_CXX_FLAGS_RELEASE " " )
set (CMAKE_CXX_FLAGS " " )


#Windows Porting modify here the Makefiles
set ( cpp_flags "${CXX_FLAGS} ${PRECOM_DEFINITION}" )
set_source_files_properties(${cpp_source_files} PROPERTIES COMPILE_FLAGS "${cpp_flags}")

set ( c_flags "${C_FLAGS} ${C_PRECOM_DEFINITION}" )
set_source_files_properties(${c_source_files} PROPERTIES COMPILE_FLAGS "${c_flags}")


message ( STATUS "cfgio module: ${libp}${library_name}.${lib}")


#add_library(hm_reader/libs_${arch}/libhm_reader_rd_${arch} STATIC ${cpp_source_files} )
add_library(${library_name} STATIC ${cpp_source_files} ${c_source_files})
target_include_directories(${library_name} PRIVATE ${include_dir_list}  )



