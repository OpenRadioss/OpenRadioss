//Copyright>    CFG Files and Library ("CFG")
//Copyright>    Copyright (C) 1986-2022 Altair Engineering Inc.
//Copyright>
//Copyright>    Altair Engineering Inc. grants to third parties limited permission to 
//Copyright>    use and modify CFG solely in connection with OpenRadioss software, provided 
//Copyright>    that any modification to CFG by a third party must be provided back to 
//Copyright>    Altair Engineering Inc. and shall be deemed a Contribution under and therefore
//Copyright>    subject to the CONTRIBUTOR LICENSE AGREEMENT for OpenRadioss software. 
//Copyright>  
//Copyright>    CFG IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, 
//Copyright>    INCLUDING, BUT NOT LIMITED TO, THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR 
//Copyright>    A PARTICULAR PURPOSE, AND NONINFRINGEMENT.  IN NO EVENT SHALL ALTAIR ENGINEERING
//Copyright>    INC. OR ITS AFFILIATES BE LIABLE FOR ANY CLAIM, DAMAGES, OR OTHER LIABILITY, 
//Copyright>    WHETHER IN AN ACTION OF CONTRACT, TORT, OR OTHERWISE, ARISING FROM, OUT OF, OR
//Copyright>    IN CONNECTION WITH CFG OR THE USE OR OTHER DEALINGS IN CFG.
// Material SPR_BEAM Type113
ATTRIBUTES(COMMON)
{
    // Solver attributes
    MAT_RHO                                 = VALUE(FLOAT, "Initial Density");
    TITLE                                   = VALUE(STRING, "");
    Ifail                                   = VALUE(INT,  " Failure Criteria");
    Ifail2                                  = VALUE(INT,  " Failure Model Flag");
    Iequil                                  = VALUE(INT,  " Equilibrium Flag");
    
	//Transitional X
    STIFF1                                  = VALUE(FLOAT,  " Transitional stiffness for linear spring or unloading stiffness");
    DAMP1                                   = VALUE(FLOAT,  " Transitional damping coefficient");
    Acoeft1                                 = VALUE(FLOAT,  " Coefficient in strain rate effect in direction X");
    Bcoeft1                                 = VALUE(FLOAT,  " Logarithmic coefficient in strain rate effect in direction X");
    Dcoeft1                                 = VALUE(FLOAT,  " Scale coefficients for translational velocity in X ");
    FUN_A1                                  = VALUE(FUNCT,  " Stiffness Function identifier defining f(Delta) transitional");
    HFLAG1                                  = VALUE(INT,  " Transitional Hardening Flag");
    FUN_B1                                  = VALUE(FUNCT,  " Function identifier defining g(Delta) transitional in X");
    FUN_C1                                  = VALUE(FUNCT,  " Function used only for unloading for translation in X");
    FUN_D1                                  = VALUE(FUNCT,  " Function to consider velocity or deformation velocity dependency damping in h(Delta)in transitional direction X");
    MIN_RUP1                                = VALUE(FLOAT,  " Negative failure displacement, transitional");
    MAX_RUP1                                = VALUE(FLOAT,  " Positive failure displacement, transitional");
    Prop_X_F                                = VALUE(FLOAT,  " Scale factor for Delta, transitional in X");
    Prop_X_E                                = VALUE(FLOAT,  " Coefficient for strain rate effect in direction X");
    scale1                                  = VALUE(FLOAT,  " Abscissa scale factor for Delta (fct_ID1 and fct_ID3)");
    ffac                                    = VALUE(FLOAT,  " Scale factor to homogeneous a force for h(delta) for fct_ID41 in transitional direction X ");
    
	//Transitional Y
    STIFF2                                  = VALUE(FLOAT,  " Transitional stiffness for linear spring or unloading stiffness");
    DAMP2                                   = VALUE(FLOAT,  " Transitional damping coefficient");
    Acoeft2                                 = VALUE(FLOAT,  " Coefficient in strain rate effect in direction Y");
    Bcoeft2                                 = VALUE(FLOAT,  " Coefficient in strain rate effect in direction Y");
    Dcoeft2                                 = VALUE(FLOAT,  " Scale coefficients for tension velocity in Y");
    FUN_A2                                  = VALUE(FUNCT,  " Stiffness Function identifier defining f(Delta) transitional in Y");
    HFLAG2                                  = VALUE(INT,  " Transitional Hardening Flag");
    FUN_B2                                  = VALUE(FUNCT,  " Function identifier defining g(Delta) transitional in Y");
    FUN_C2                                  = VALUE(FUNCT,  " Function used only for unloading  for translation in Y");
    FUN_D2                                  = VALUE(FUNCT,  " Function to consider velocity or deformation velocity dependency damping in h(Delta) in transitional direction Y");
    MIN_RUP2                                = VALUE(FLOAT,  "  Negative failure displacement, transitional");
    MAX_RUP2                                = VALUE(FLOAT,  " Positive failure displacement, transitional");
    Prop_Y_F                                = VALUE(FLOAT,  " Scale factor for Delta, transitional in Y");
    Prop_Y_E                                = VALUE(FLOAT,  " Coefficient for strain rate effect in direction Y");
    scale2                                  = VALUE(FLOAT,  " Abscissa scale factor for Delta (fct_ID1 and fct_ID3)");
    df                                      = VALUE(FLOAT,  " Scale factor to homogeneous a force for h(delta) for fct_ID42 in transitional direction Y ");
    
	//Transitional Z
    STIFF3                                  = VALUE(FLOAT,  " Transitional stiffness for linear spring or unloading stiffness");
    DAMP3                                   = VALUE(FLOAT,  " Transitional damping coefficient");
    Acoeft3                                 = VALUE(FLOAT,  " Coefficient for strain rate effect in direction Z");
    Bcoeft3                                 = VALUE(FLOAT,  " Coefficient for strain rate effect in direction Z");
    Dcoeft3                                 = VALUE(FLOAT,  " Scale coefficient for tension velocity");
    FUN_A3                                  = VALUE(FUNCT,  " Stiffness Function identifier defining f(Delta) transitional in Z");
    HFLAG3                                  = VALUE(INT,  " Transitional Hardening Flag");
    FUN_B3                                  = VALUE(FUNCT,  " Function identifier defining g(Delta) transitional in Z");
    FUN_C3                                  = VALUE(FUNCT,  " Function used only for unloading  for translation in Z");
    FUN_D3                                  = VALUE(FUNCT,  " Function to consider velocity or deformation velocity dependency damping in h(Delta) in transitional direction Z");
    MIN_RUP3                                = VALUE(FLOAT,  "  Negative failure displacement, transitional");
    MAX_RUP3                                = VALUE(FLOAT,  " Positive failure displacement, transitional");
    Prop_Z_F                                = VALUE(FLOAT,  " Scale factor for Delta, transitional  in Z");
    Prop_Z_E                                = VALUE(FLOAT,  " Coefficient for strain rate effect in direction Z");
    scale3                                  = VALUE(FLOAT,  " Abscissa scale factor for Delta (fct_ID1 and fct_ID3)");
    D2                                      = VALUE(FLOAT,  " Scale factor to homogeneous a force for h(delta) for fct_ID43 in transitional direction XZ ");
    
	//Rotational X
    STIFF4                                  = VALUE(FLOAT,  " Rotational stiffness for linear spring or unloading stiffness");
    DAMP4                                   = VALUE(FLOAT,  " Rotational damping coefficient");
    Acoeft4                                 = VALUE(FLOAT,  " Coefficient for strain rate effect in torsion X");
    Bcoeft4                                 = VALUE(FLOAT,  "Coefficient for strain rate effect in torsion X");
    Dcoeft4                                 = VALUE(FLOAT,  " Scale coefficients for torsion velocity");
    FUN_A4                                  = VALUE(FUNCT,  " Stiffness Function identifier defining f(Theta) rotational in X");
    HFLAG4                                  = VALUE(INT,  " Rotational Hardening Flag");
    FUN_B4                                  = VALUE(FUNCT,  " Function identifier defining g(Theta) rotational in X");
    FUN_C4                                  = VALUE(FUNCT,  "  Function used only for unloading for rotational in X");
    FUN_D4                                  = VALUE(FUNCT,  " Function to consider velocity or deformation velocity dependency damping in(Delta) in rotational direction X");
    MIN_RUP4                                = VALUE(FLOAT,  " Negative failure rotation, rotational");
    MAX_RUP4                                = VALUE(FLOAT,  " Positive failure rotation, rotational");
    Prop_Tor_F                              = VALUE(FLOAT,  " Scale factor for Theta, rotational");
    Prop_Tor_E                              = VALUE(FLOAT,  " Coefficient for strain rate effect in torsion X");
    scale4                                  = VALUE(FLOAT,  " Abscissa scale factor for Theta(fct_ID1 and fct_ID3)");
    Y0                                      = VALUE(FLOAT,  " Scale factor to homogeneous a moment  for h(delta) for fct_ID44 in transitional direction X");
    
	//Rotational Y
    STIFF5                                  = VALUE(FLOAT,  " Rotational stiffness for linear spring or unloading stiffness");
    DAMP5                                   = VALUE(FLOAT,  " Rotational damping coefficient");
    Acoeft5                                 = VALUE(FLOAT,  " Coefficient for strain rate effect in torsion Y ");
    Bcoeft5                                 = VALUE(FLOAT,  " Coefficient for strain rate effect in torsion Y ");
    Dcoeft5                                 = VALUE(FLOAT,  " Scale coefficients for torsion velocity");
    FUN_A5                                  = VALUE(FUNCT,  " Stiffness Function identifier defining f(Theta) rotational in Y");
    HFLAG5                                  = VALUE(INT,  " Rotational Hardening Flag");
    FUN_B5                                  = VALUE(FUNCT,  " Function identifier defining g(Theta) rotational in Y");
    FUN_C5                                  = VALUE(FUNCT,  " Function used only for unloading for rotation in Y");
    FUN_D5                                  = VALUE(FUNCT,  " Function to consider velocity or deformation velocity dependency damping in h(Delta) in rotational direction Y");
    MIN_RUP5                                = VALUE(FLOAT,  " Negative failure rotation, rotational");
    MAX_RUP5                                = VALUE(FLOAT,  " Positive failure rotation, rotational");
    Prop_FlxY_F                             = VALUE(FLOAT,  " Scale factor for Theta, rotational");
    Prop_FlxY_E                             = VALUE(FLOAT,  " Coefficient for strain rate effect in torsion Y");
    scale5                                  = VALUE(FLOAT,  " Abscissa scale factor for Theta(fct_ID1 and fct_ID3)");
    Z0                                      = VALUE(FLOAT,  " Scale factor to homogeneous a moment  for h(delta) for fct_ID44 in transitional direction Y ");
    
	//Rotational Z
    STIFF6                                  = VALUE(FLOAT,  " Rotational stiffness for linear spring or unloading stiffness");
    DAMP6                                   = VALUE(FLOAT,  " Rotational damping coefficient");
    Acoeft6                                 = VALUE(FLOAT,  " Coefficient for strain rate effect in torsion Z ");
    Bcoeft6                                 = VALUE(FLOAT,  " Coefficient for strain rate effect in torsion Z ");
    Dcoeft6                                 = VALUE(FLOAT,  " Scale coefficients for torsion Z");
    FUN_A6                                  = VALUE(FUNCT,  " Stiffness Function identifier defining f(Theta) rotational in Z");
    HFLAG6                                  = VALUE(INT,  " Rotational Hardening Flag");
    FUN_B6                                  = VALUE(FUNCT,  " Function identifier defining g(Theta) rotational in Z");
    FUN_C6                                  = VALUE(FUNCT,  " Function used only for unloading for rotational in Z");
    FUN_D6                                  = VALUE(FUNCT,  " Function to consider velocity or deformation velocity dependency damping in h(Delta) in rotational direction Z");
    MIN_RUP6                                = VALUE(FLOAT,  " Negative failure rotation, rotational");
    MAX_RUP6                                = VALUE(FLOAT,  " Positive failure rotation, rotational");
    Prop_FlxZ_F                             = VALUE(FLOAT,  " Scale factor for Theta, rotational");
    Prop_FlxZ_E                             = VALUE(FLOAT,  " Coefficient for strain rate effect in torsion Z");
    scale6                                  = VALUE(FLOAT,  " Abscissa scale factor for Theta(fct_ID1 and fct_ID3)"); 
    D1                                      = VALUE(FLOAT,  " Scale factor to homogeneous a moment  for h(delta) for fct_ID44 in transitional direction Z");      
    
	ISRATE                                  = VALUE(INT,  " Smooth Strain Rate Flag");
    Asrate                                  = VALUE(FLOAT,  " Strain Rate Cutting Frequency");   
    
    
    //Attributes for HM usage 
    KEYWORD_STR                             = VALUE(STRING, "Solver Keyword");
    NUM_COMMENTS                            = SIZE("NUM_COMMENTS");
    COMMENTS                                = ARRAY[NUM_COMMENTS](STRING,  "Entity_Comments");
    CommentEnumField                        = VALUE(INT,  "User Comments");   
    Mat_Name_OR_LawNo						= VALUE(INT, "");
    IO_FLAG                                 = VALUE(INT, "");
    TYPE_NO                                 = VALUE(STRING, "");
}

SKEYWORDS_IDENTIFIER(COMMON)
{    
    Ifail                                   = 8032;
    Ifail2                                  = 1000;
    Iequil                                  = 5398;
    //Transitional X
    STIFF1                                  = 1131;
    DAMP1                                   =  254;
    Acoeft1                                 = 5160;
    Bcoeft1                                 = 5161;
    Dcoeft1                                 = 5162;
    FUN_A1                                  =   45;
    HFLAG1                                  = 5163;
    FUN_B1                                  =  168;
    FUN_C1                                  = 1189;
    FUN_D1                                  = 8035;
    MIN_RUP1                                = 5164;
    MAX_RUP1                                = 5165;
    Prop_X_F                                = 4137;
    Prop_X_E                                = 4138;
    scale1                                  = 4528;
    ffac                                    = 4172;
    //Transitional Y
    STIFF2                                  = 5178;
    DAMP2                                   = 5179;
    Acoeft2                                 = 5180;
    Bcoeft2                                 = 5181;
    Dcoeft2                                 = 5182;
    FUN_A2                                  =  170;
    HFLAG2                                  = 5183;
    FUN_B2                                  =  171;
    FUN_C2                                  = 1167;
    FUN_D2                                  = 8036;
    MIN_RUP2                                = 5184;
    MAX_RUP2                                = 5185;
    Prop_Y_F                                = 4139;
    Prop_Y_E                                = 4140;
    scale2                                  = 4529;
    df                                      = 4183;
    //Transitional Z
    STIFF3                                  = 5186;
    DAMP3                                   = 5187;
    Acoeft3                                 = 5188;
    Bcoeft3                                 = 5189;
    Dcoeft3                                 = 5190;
    FUN_A3                                  =  172;
    HFLAG3                                  = 5191;
    FUN_B3                                  =  199;
    FUN_C3                                  = 5347;
    FUN_D3                                  = 8037;
    MIN_RUP3                                = 5192;
    MAX_RUP3                                = 5193;
    Prop_Z_F                                = 4141;
    Prop_Z_E                                = 4142;
    scale3                                  = 4530;
    D2                                      = 4194;
    //Rotational X
    STIFF4                                  = 5194;
    DAMP4                                   = 5195;
    Acoeft4                                 = 5196;
    Bcoeft4                                 = 5197;
    Dcoeft4                                 = 5198;
    FUN_A4                                  =  200;
    HFLAG4                                  = 5199;
    FUN_B4                                  =  224;
    FUN_C4                                  = 5348;
    FUN_D4                                  = 8038;
    MIN_RUP4                                = 5200;
    MAX_RUP4                                = 5201;
    Prop_Tor_F                              = 4143;
    Prop_Tor_E                              = 4144;
    scale4                                  = 4531;
    Y0                                      = 4185;
    //Rotational Y
    STIFF5                                  = 5202;
    DAMP5                                   = 5203;
    Acoeft5                                 = 5204;
    Bcoeft5                                 = 5205;
    Dcoeft5                                 = 5206;
    FUN_A5                                  = 1141;
    HFLAG5                                  = 5207;
    FUN_B5                                  = 1142;
    FUN_C5                                  = 5349;
    FUN_D5                                  = 8039;
    MIN_RUP5                                = 5208;
    MAX_RUP5                                = 5209;
    Prop_FlxY_F                             = 4145;
    Prop_FlxY_E                             = 4146;
    scale5                                  = 4532;
    Z0                                      = 4186;
    //Rotational Z
    STIFF6                                  = 5210;
    DAMP6                                   = 5211;
    Acoeft6                                 = 5212;
    Bcoeft6                                 = 5213;
    Dcoeft6                                 = 5214;
    FUN_A6                                  = 1175;
    HFLAG6                                  = 5215;
    FUN_B6                                  = 1176;
    FUN_C6                                  = 5350;
    FUN_D6                                  = 8040;
    MIN_RUP6                                = 5216;
    MAX_RUP6                                = 5217;
    Prop_FlxZ_F                             = 4147;
    Prop_FlxZ_E                             = 4148;
    scale6                                  = 4533;
    D1                                      = 4193;   
    ISRATE                                  = 4231;
    Asrate                                  = 4534; 
    MAT_RHO                                 = 118;
    KEYWORD_STR                             = 9000;
	//Attributes for HM usage 
    NUM_COMMENTS                            = 5110;
    COMMENTS                                = 5109;
    CommentEnumField                        = 7951;
    Mat_Name_OR_LawNo						= 4538;
    TITLE                                   =   -1;
    TYPE_NO                                 =   -1;
    IO_FLAG                                 =   -1;
}

CHECK(COMMON)
{
    MIN_RUP1                            <= 0.0;
    MIN_RUP2                            <= 0.0;
    MIN_RUP3                            <= 0.0;
    MIN_RUP4                            <= 0.0;
    MIN_RUP5                            <= 0.0;
    MIN_RUP6                            <= 0.0;
}

DEFAULTS(COMMON)
{
    Acoeft1                              =     1.0;
    Acoeft2                              =     1.0;
    Acoeft3                              =     1.0;
    Acoeft4                              =     1.0;
    Acoeft5                              =     1.0;
    Acoeft6                              =     1.0;
    Asrate                               =  1.0e30;  
    Dcoeft1                              =     1.0;
    Dcoeft2                              =     1.0;
    Dcoeft3                              =     1.0;
    Dcoeft4                              =     1.0;
    Dcoeft5                              =     1.0;
    Dcoeft6                              =     1.0;
    Ifail2                               =       0;
    ISRATE                               =       0;
    MAX_RUP1                             =  1.0e30;
    MAX_RUP2                             =  1.0e30;
    MAX_RUP3                             =  1.0e30;
    MAX_RUP4                             =  1.0e30;
    MAX_RUP5                             =  1.0e30;
    MAX_RUP6                             =  1.0e30;
    MIN_RUP1                             = -1.0e30;
    MIN_RUP2                             = -1.0e30;
    MIN_RUP3                             = -1.0e30;
    MIN_RUP4                             = -1.0e30;
    MIN_RUP5                             = -1.0e30;
    MIN_RUP6                             = -1.0e30;
    scale1                               =     1.0;
    scale2                               =     1.0;
    scale5                               =     1.0;
    ffac                                 =     1.0;
    df                                   =     1.0;
    D2                                   =     1.0;
    Y0                                   =     1.0;
    Z0                                   =     1.0;
    D1                                   =     1.0;
    Mat_Name_OR_LawNo                    =       0;
}

GUI(COMMON)
{
 optional:
    RADIO(CommentEnumField)
    {
        ENUM_VALUE_FLAG = TRUE;
       ADD(1, "1:Hide in Menu/Export");
       ADD(2, "2:Show in Menu/Export");
       ADD(3, "3:Do Not Export");
    }
    if (CommentEnumField == 2)
    {
        SIZE(NUM_COMMENTS);
        ARRAY(NUM_COMMENTS, "")
        {
            SCALAR(COMMENTS);
        }
    }
    if( Mat_Name_OR_LawNo == 2)
    {
        ASSIGN(KEYWORD_STR, "/MAT");
        ASSIGN(KEYWORD_STR, "/LAW108/");
    }
    else
    {
        ASSIGN(KEYWORD_STR, "/MAT");
        ASSIGN(KEYWORD_STR, "/SPR_GENE/");
    }
// Solver attributes 
    mandatory:
        SCALAR(MAT_RHO)        {DIMENSION="density";}
    optional:
    RADIO(Ifail)
    {
        ADD(0, "0:Uni-Directional Criteria.");
        ADD(1, "1:Multi-Directional Criteria.");
    }
    RADIO(Iequil)
    {
        ADD(0, "0:No Equilibrium.");
        ADD(1, "1:Force and Moment Equilibrium."); 
    }
    RADIO(Ifail2)
    {
        ADD(0, "0:Displacement criteria (rotation criteria)");
        ADD(1, "1:Force criteria (moment criteria)");
        ADD(2, "2:Internal Energy Criteria.");
    }
    SEPARATOR("Transitional X");
    SCALAR(STIFF1)  { DIMENSION="translation_stiffness"; }
    SCALAR(DAMP1)   { DIMENSION="massFlux";             }
    SCALAR(Acoeft1) { DIMENSION="force";             }
    SCALAR(Bcoeft1) { DIMENSION="force";             }
    SCALAR(Dcoeft1) { DIMENSION="velocity";                 }
    FUNCTION(FUN_A1) {
      X_TITLE="dl";    X_DIMENSION="l";
      Y_TITLE="f";     Y_DIMENSION="force";
    }
    RADIO(HFLAG1)
    {
       ADD(0, "0: Nonlinear elastic spring.");
       ADD(1, "1: Nonlinear elastic plastic spring with isotropic hardening.");
       ADD(2, "2: Nonlinear elasto-plastic spring with decoupled hardening in tension and compression.");
       ADD(4, "4: Nonlinear elastic plastic spring kinematic hardening.");
       ADD(5, "5: Nonlinear elasto-plastic spring with nonlinear unloading.");
       ADD(6, "6: Nonlinear elasto-plastic spring with isotropic hardening and nonlinear unloading.");
       ADD(7, "7: Nonlinear spring with elastic Hysteresis.");
    }
     FUNCTION(FUN_B1) {
      X_TITLE="dl/dt"; X_DIMENSION="velocity";        
      Y_TITLE="g";     Y_DIMENSION="DIMENSIONLESS"; 
    }
    FUNCTION(FUN_C1) {
      if(HFLAG1==4) 
      {
         X_TITLE="dl";                    X_DIMENSION="l";
         Y_TITLE="f3";                    Y_DIMENSION="force";
      } 
      else if(HFLAG1==5) 
      {
        X_TITLE="Maximum displacement";  X_DIMENSION="l";
        Y_TITLE="Residual displacement"; Y_DIMENSION="l";
      }
    }
    FUNCTION(FUN_D1)
    {
       X_DIMENSION="velocity";
       X_TITLE="dl/dt";
       Y_DIMENSION="force";
       Y_TITLE="h";
    }
    SCALAR(MIN_RUP1){
      if (Ifail2 == 1)      { TITLE="Negative failure force in transitional direction"; DIMENSION="force"; }
      else if (Ifail2 == 2) { TITLE="Negative failure internal energy related to transitional direction"; DIMENSION="energy"; }
      else                  { TITLE="Negative failure displacement in transitional direction";  DIMENSION="l";        }
    }
    SCALAR(MAX_RUP1) {
      if (Ifail2 == 1)      { TITLE="Negative failure force in transitional direction"; DIMENSION="force"; }
      else if (Ifail2 == 2) { TITLE="Negative failure internal energy related to transitional direction"; DIMENSION="energy"; }
      else                  { TITLE="Negative failure displacement in transitional direction";  DIMENSION="l";        }
    }
    SCALAR(Prop_X_F)  { DIMENSION="velocity";         }
    SCALAR(Prop_X_E)  { DIMENSION="force";         }
    SCALAR(scale1)    {DIMENSION="l";}
    SCALAR(ffac)      {DIMENSION="force";}
    SEPARATOR("");
    SEPARATOR("Transitional Y");
    SCALAR(STIFF2) { DIMENSION="translation_stiffness"; }
    SCALAR(DAMP2)  { DIMENSION="massFlux";             }
    SCALAR(Acoeft2){ DIMENSION="force";             }
    SCALAR(Bcoeft2){ DIMENSION="force";             }
    SCALAR(Dcoeft2){ DIMENSION="velocity";                 }
    FUNCTION(FUN_A2) {
      X_TITLE="dl";    X_DIMENSION="l";
      Y_TITLE="f";     Y_DIMENSION="force";
    }
    RADIO(HFLAG2)
    {
       ADD(0, "0: Nonlinear elastic spring.");
       ADD(1, "1: Nonlinear elastic plastic spring with isotropic hardening.");
       ADD(2, "2: Nonlinear elasto-plastic spring with decoupled hardening in tension and compression.");
       ADD(4, "4: Nonlinear elastic plastic spring kinematic hardening.");
       ADD(5, "5: Nonlinear elasto-plastic spring with nonlinear unloading.");
       ADD(6, "6: Nonlinear elasto-plastic spring with isotropic hardening and nonlinear unloading.");
       ADD(7, "7: Nonlinear spring with elastic Hysteresis.");
    }
     FUNCTION(FUN_B2) {
      X_TITLE="dl/dt"; X_DIMENSION="velocity";        
      Y_TITLE="g";     Y_DIMENSION="DIMENSIONLESS"; 
    }
    FUNCTION(FUN_C2) {
      if(HFLAG2==4) 
      {
         X_TITLE="dl";                    X_DIMENSION="l";
         Y_TITLE="f3";                    Y_DIMENSION="force";
      } 
      else if(HFLAG2==5) 
      {
        X_TITLE="Maximum displacement";  X_DIMENSION="l";
        Y_TITLE="Residual displacement"; Y_DIMENSION="l";
      }
    }
    FUNCTION(FUN_D2)
    {
       X_DIMENSION="velocity";
       X_TITLE="dl/dt";
       Y_DIMENSION="force";
       Y_TITLE="h";
    }
    SCALAR(MIN_RUP2){
      if (Ifail2 == 1)      { TITLE="Negative failure force in transitional direction"; DIMENSION="force"; }
      else if (Ifail2 == 2) { TITLE="Negative failure internal energy related to transitional direction"; DIMENSION="energy"; }
      else                  { TITLE="Negative failure displacement in transitional direction";  DIMENSION="l";        }
    }
    SCALAR(MAX_RUP2) {
      if (Ifail2 == 1)      { TITLE="Negative failure force in transitional direction"; DIMENSION="force"; }
      else if (Ifail2 == 2) { TITLE="Negative failure internal energy related to transitional direction"; DIMENSION="energy"; }
      else                  { TITLE="Negative failure displacement in transitional direction";  DIMENSION="l";        }
    }
    SCALAR(Prop_Y_F){ DIMENSION="velocity";         }
    SCALAR(Prop_Y_E){ DIMENSION="force";         }
    SCALAR(scale2)  {DIMENSION="l";}
    SCALAR(df)      {DIMENSION="force";}
    SEPARATOR("");
    SEPARATOR("Transitional Z");
    SCALAR(STIFF3) { DIMENSION="translation_stiffness"; }
    SCALAR(DAMP3)  { DIMENSION="massFlux";             }
    SCALAR(Acoeft3){ DIMENSION="force";             }
    SCALAR(Bcoeft3){ DIMENSION="force";             }
    SCALAR(Dcoeft3){ DIMENSION="velocity";                 }
    FUNCTION(FUN_A3) {
      X_TITLE="dl";    X_DIMENSION="l";
      Y_TITLE="f";     Y_DIMENSION="force";
    }
    RADIO(HFLAG3)
    {
       ADD(0, "0: Nonlinear elastic spring.");
       ADD(1, "1: Nonlinear elastic plastic spring with isotropic hardening.");
       ADD(2, "2: Nonlinear elasto-plastic spring with decoupled hardening in tension and compression.");
       ADD(4, "4: Nonlinear elastic plastic spring kinematic hardening.");
       ADD(5, "5: Nonlinear elasto-plastic spring with nonlinear unloading.");
       ADD(6, "6: Nonlinear elasto-plastic spring with isotropic hardening and nonlinear unloading.");
       ADD(7, "7: Nonlinear spring with elastic Hysteresis.");
    }
     FUNCTION(FUN_B3) {
      X_TITLE="dl/dt"; X_DIMENSION="velocity";        
      Y_TITLE="g";     Y_DIMENSION="DIMENSIONLESS"; 
    }
    FUNCTION(FUN_C3) {
      if(HFLAG3==4) 
      {
         X_TITLE="dl";                    X_DIMENSION="l";
         Y_TITLE="f3";                    Y_DIMENSION="force";
      } 
      else if(HFLAG3==5) 
      {
        X_TITLE="Maximum displacement";  X_DIMENSION="l";
        Y_TITLE="Residual displacement"; Y_DIMENSION="l";
      }
    }
    FUNCTION(FUN_D3)
    {
       X_DIMENSION="velocity";
       X_TITLE="dl/dt";
       Y_DIMENSION="force";
       Y_TITLE="h";
    }
    SCALAR(MIN_RUP3){
      if (Ifail2 == 1)      { TITLE="Negative failure force in transitional direction"; DIMENSION="force"; }
      else if (Ifail2 == 2) { TITLE="Negative failure internal energy related to transitional direction"; DIMENSION="energy"; }
      else                  { TITLE="Negative failure displacement in transitional direction";  DIMENSION="l";        }
    }
    SCALAR(MAX_RUP3) {
      if (Ifail2 == 1)      { TITLE="Negative failure force in transitional direction"; DIMENSION="force"; }
      else if (Ifail2 == 2) { TITLE="Negative failure internal energy related to transitional direction"; DIMENSION="energy"; }
      else                  { TITLE="Negative failure displacement in transitional direction";  DIMENSION="l";        }
    }
    SCALAR(Prop_Z_F){ DIMENSION="velocity";         }
    SCALAR(Prop_Z_E){ DIMENSION="force";         }
    SCALAR(scale3)  {DIMENSION="l";}
    SCALAR(D2)      {DIMENSION="force";}
    SEPARATOR("");
    SEPARATOR("Rotational X");
    SCALAR(STIFF4) { DIMENSION="ROTATION STIFFNESS";    }
    SCALAR(DAMP4)  { DIMENSION="torsion_damping";       }
    SCALAR(Acoeft4){ DIMENSION="moment";     }
    SCALAR(Bcoeft4){ DIMENSION="moment";     }
    SCALAR(Dcoeft4){ DIMENSION="ang_velocity";         } 
    FUNCTION(FUN_A4,"f(r)") {
     X_TITLE="Angular disp."; X_DIMENSION="a";
     Y_TITLE="f";             Y_DIMENSION="moment";
    }
    RADIO(HFLAG4)
    {
       ADD(0, "0: Nonlinear elastic spring.");
       ADD(1, "1: Nonlinear elastic plastic spring with isotropic hardening.");
       ADD(2, "2: Nonlinear elasto-plastic spring with decoupled hardening in tension and compression.");
       ADD(4, "4: Nonlinear elastic plastic spring kinematic hardening.");
       ADD(5, "5: Nonlinear elasto-plastic spring with nonlinear unloading.");
       ADD(6, "6: Nonlinear elasto-plastic spring with isotropic hardening and nonlinear unloading.");
       ADD(7, "7: Nonlinear spring with elastic Hysteresis.");
    }
    FUNCTION(FUN_B4,"g(dr/dt)") {
     X_TITLE="Angular speed"; X_DIMENSION="ang_velocity";     //X_SCALING(Prop_Tor_F);
     Y_TITLE="g";             Y_DIMENSION="DIMENSIONLESS"; //Y_SCALING(Prop_Tor_E);
    }
    FUNCTION(FUN_C4) {
     if(HFLAG4==4) 
     {
       X_TITLE="Angular disp.";      X_DIMENSION="a";
       Y_TITLE="f3";                 Y_DIMENSION="moment";
     } 
    else if(HFLAG4==5) 
    {
      X_TITLE="Max. angular disp."; X_DIMENSION="a";
      Y_TITLE="Res. angular disp."; Y_DIMENSION="a";
    }
    }
    FUNCTION(FUN_D4) {
        X_TITLE="Angular speed";          X_DIMENSION="ang_velocity"; 
        Y_TITLE="h";                          Y_DIMENSION="moment";
    }
    SCALAR(MIN_RUP4) {
      if (Ifail2 == 1)      { TITLE="Negative failure force in transitional direction"; DIMENSION="moment"; }
      else if (Ifail2 == 2) { TITLE="Negative failure internal energy related to transitional direction"; DIMENSION="energy"; }
      else                  { TITLE="Negative failure displacement in transitional direction";  DIMENSION="a";        }
    }
    SCALAR(MAX_RUP4) {
      if (Ifail2 == 1)      { TITLE="Negative failure force in transitional direction"; DIMENSION="moment"; }
      else if (Ifail2 == 2) { TITLE="Negative failure internal energy related to transitional direction"; DIMENSION="energy"; }
      else                  { TITLE="Negative failure displacement in transitional direction";  DIMENSION="a";        }
    }    
    SCALAR(Prop_Tor_F) { DIMENSION="ang_velocity";         } 
    SCALAR(Prop_Tor_E) { DIMENSION="moment";         } 
    SCALAR(scale4)     {DIMENSION="a";}
    SCALAR(Y0)         {DIMENSION="moment";}
    SEPARATOR("");
    SEPARATOR("Rotational Y");
    SCALAR(STIFF5) { DIMENSION="ROTATION STIFFNESS";    }
    SCALAR(DAMP5)  { DIMENSION="torsion_damping";       }
    SCALAR(Acoeft5){ DIMENSION="moment";     }
    SCALAR(Bcoeft5){ DIMENSION="moment";     }
    SCALAR(Dcoeft5){ DIMENSION="ang_velocity";         } 
    FUNCTION(FUN_A5,"f(r)") {
     X_TITLE="Angular disp."; X_DIMENSION="a";
     Y_TITLE="f";             Y_DIMENSION="moment";
    }
    RADIO(HFLAG5)
    {
       ADD(0, "0: Nonlinear elastic spring.");
       ADD(1, "1: Nonlinear elastic plastic spring with isotropic hardening.");
       ADD(2, "2: Nonlinear elasto-plastic spring with decoupled hardening in tension and compression.");
       ADD(4, "4: Nonlinear elastic plastic spring kinematic hardening.");
       ADD(5, "5: Nonlinear elasto-plastic spring with nonlinear unloading.");
       ADD(6, "6: Nonlinear elasto-plastic spring with isotropic hardening and nonlinear unloading.");
       ADD(7, "7: Nonlinear spring with elastic Hysteresis.");
    }
    FUNCTION(FUN_B5,"g(dr/dt)") {
     X_TITLE="Angular speed"; X_DIMENSION="ang_velocity";     //X_SCALING(Prop_FlxY_F);
     Y_TITLE="g";             Y_DIMENSION="DIMENSIONLESS"; // Y_SCALING(Prop_FlxY_E);
    }
    FUNCTION(FUN_C5) {
     if(HFLAG5==4) 
     {
       X_TITLE="Angular disp.";      X_DIMENSION="a";
       Y_TITLE="f3";                 Y_DIMENSION="moment";
     } 
    else if(HFLAG5==5) 
    {
      X_TITLE="Max. angular disp."; X_DIMENSION="a";
      Y_TITLE="Res. angular disp."; Y_DIMENSION="a";
    }
    }
    FUNCTION(FUN_D5) {
        X_TITLE="Angular speed";          X_DIMENSION="ang_velocity"; 
        Y_TITLE="h";                          Y_DIMENSION="moment";
    }
    SCALAR(MIN_RUP5) {
      if (Ifail2 == 1)      { TITLE="Negative failure force in transitional direction"; DIMENSION="moment"; }
      else if (Ifail2 == 2) { TITLE="Negative failure internal energy related to transitional direction"; DIMENSION="energy"; }
      else                  { TITLE="Negative failure displacement in transitional direction";  DIMENSION="a";        }
    }
    SCALAR(MAX_RUP5) {
      if (Ifail2 == 1)      { TITLE="Negative failure force in transitional direction"; DIMENSION="moment"; }
      else if (Ifail2 == 2) { TITLE="Negative failure internal energy related to transitional direction"; DIMENSION="energy"; }
      else                  { TITLE="Negative failure displacement in transitional direction";  DIMENSION="a";        }
    }       
    SCALAR(Prop_FlxY_F) { DIMENSION="ang_velocity";         } 
    SCALAR(Prop_FlxY_E) { DIMENSION="moment";         } 
    SCALAR(scale5)      {DIMENSION="a";}
    SCALAR(Z0)          {DIMENSION="moment";}
    SEPARATOR("");
    SEPARATOR("Rotational Z");
    SCALAR(STIFF6) { DIMENSION="ROTATION STIFFNESS";    }
    SCALAR(DAMP6)  { DIMENSION="torsion_damping";       }
    SCALAR(Acoeft6){ DIMENSION="moment";     }
    SCALAR(Bcoeft6){ DIMENSION="moment";     }
    SCALAR(Dcoeft6){ DIMENSION="ang_velocity";         } 
    FUNCTION(FUN_A6,"f(r)") {
     X_TITLE="Angular disp."; X_DIMENSION="a";
     Y_TITLE="f";             Y_DIMENSION="moment";
    }
    RADIO(HFLAG6)
    {
       ADD(0, "0: Nonlinear elastic spring.");
       ADD(1, "1: Nonlinear elastic plastic spring with isotropic hardening.");
       ADD(2, "2: Nonlinear elasto-plastic spring with decoupled hardening in tension and compression.");
       ADD(4, "4: Nonlinear elastic plastic spring kinematic hardening.");
       ADD(5, "5: Nonlinear elasto-plastic spring with nonlinear unloading.");
       ADD(6, "6: Nonlinear elasto-plastic spring with isotropic hardening and nonlinear unloading.");
       ADD(7, "7: Nonlinear spring with elastic Hysteresis.");
    }
    FUNCTION(FUN_B6,"g(dr/dt)") {
     X_TITLE="Angular speed"; X_DIMENSION="ang_velocity";   //  X_SCALING(Prop_FlxZ_F);
     Y_TITLE="g";             Y_DIMENSION="DIMENSIONLESS"; //Y_SCALING(Prop_FlxZ_E);
    }
    FUNCTION(FUN_C6) {
     if(HFLAG6==4) 
     {
       X_TITLE="Angular disp.";      X_DIMENSION="a";
       Y_TITLE="f3";                 Y_DIMENSION="moment";
     } 
    else if(HFLAG6==5) 
    {
      X_TITLE="Max. angular disp."; X_DIMENSION="a";
      Y_TITLE="Res. angular disp."; Y_DIMENSION="a";
    }
    }
    FUNCTION(FUN_D6) {
        X_TITLE="Angular speed";          X_DIMENSION="ang_velocity"; 
        Y_TITLE="h";                          Y_DIMENSION="moment";
    }
    SCALAR(MIN_RUP6) {
      if (Ifail2 == 1)      { TITLE="Negative failure force in transitional direction"; DIMENSION="moment"; }
      else if (Ifail2 == 2) { TITLE="Negative failure internal energy related to transitional direction"; DIMENSION="energy"; }
      else                  { TITLE="Negative failure displacement in transitional direction";  DIMENSION="a";        }
    }
    SCALAR(MAX_RUP6) {
      if (Ifail2 == 1)      { TITLE="Negative failure force in transitional direction"; DIMENSION="moment"; }
      else if (Ifail2 == 2) { TITLE="Negative failure internal energy related to transitional direction"; DIMENSION="energy"; }
      else                  { TITLE="Negative failure displacement in transitional direction";  DIMENSION="a";        }
    }
    SCALAR(Prop_FlxZ_F) { DIMENSION="ang_velocity";         } 
    SCALAR(Prop_FlxZ_E) { DIMENSION="moment";         } 
    SCALAR(scale6)      {DIMENSION="a";}
    SCALAR(D1)          {DIMENSION="moment";}

    SEPARATOR(""); 
    RADIO(ISRATE)
    {
        ADD(0, "0: Strain rate smoothing is inactive");
        ADD(1, "1: Strain rate smoothing is active");
    }
    SCALAR(Asrate){ DIMENSION="f";         } 
}
//File format for Radioss 2018
FORMAT(radioss2020)
{
    ASSIGN(IO_FLAG, 0, EXPORT);
    ASSIGN(IO_FLAG, 1,IMPORT);
    if(IO_FLAG == 1)
    {
        HEADER("/MAT/%3s",TYPE_NO);
        if(TYPE_NO == "LAW" )
        {
            ASSIGN(Mat_Name_OR_LawNo,2);
        }
    }
    else if(IO_FLAG == 0 && Mat_Name_OR_LawNo == 2)
    {
        HEADER("/MAT/LAW108/%d",_ID_);
        CARD("%-100s", TITLE);
    }
    else
    {
        HEADER("/MAT/SPR_GENE/%d",_ID_);
        CARD("%-100s", TITLE);
    }
    COMMENT("#              RHO_I");
    CARD("%20lg", MAT_RHO);
    COMMENT("#    Ifail    Iequil    Ifail2");
    CARD("%10d%10d%10d",Ifail,Iequil,Ifail2);  
    //Tx
    COMMENT("#                 K1                  C1                  A1                  B1                  D1");
    CARD("%20lg%20lg%20lg%20lg%20lg",STIFF1,DAMP1,Acoeft1,Bcoeft1,Dcoeft1);
    COMMENT("# fct_ID11        H1  fct_ID21  fct_ID31  fct_ID41                     DeltaMin1           DeltaMax1");
    CARD("%10d%10d%10d%10d%10d          %20lg%20lg",FUN_A1,HFLAG1,FUN_B1,FUN_C1,FUN_D1,MIN_RUP1,MAX_RUP1);
    COMMENT("#                 F1                  E1             Ascale1             Hscale1");
    CARD("%20lg%20lg%20lg%20lg",Prop_X_F,Prop_X_E,scale1,ffac);
    //Ty
    COMMENT("#                 K2                  C2                  A2                  B2                  D2");
    CARD("%20lg%20lg%20lg%20lg%20lg",STIFF2,DAMP2,Acoeft2,Bcoeft2,Dcoeft2);
    COMMENT("# fct_ID12        H2  fct_ID22  fct_ID32  fct_ID42                     DeltaMin2           DeltaMax2");
    CARD("%10d%10d%10d%10d%10d          %20lg%20lg",FUN_A2,HFLAG2,FUN_B2,FUN_C2,FUN_D2,MIN_RUP2,MAX_RUP2);
    COMMENT("#                 F2                  E2             Ascale2             Hscale2");
    CARD("%20lg%20lg%20lg%20lg",Prop_Y_F,Prop_Y_E,scale2,df);
    //Tz
    COMMENT("#                 K3                  C3                  A3                  B3                  D3");
    CARD("%20lg%20lg%20lg%20lg%20lg",STIFF3,DAMP3,Acoeft3,Bcoeft3,Dcoeft3);
    COMMENT("# fct_ID13        H3  fct_ID23  fct_ID33  fct_ID43                     DeltaMin3           DeltaMax3");
    CARD("%10d%10d%10d%10d%10d          %20lg%20lg",FUN_A3,HFLAG3,FUN_B3,FUN_C3,FUN_D3,MIN_RUP3,MAX_RUP3);
    COMMENT("#                 F3                  E3             Ascale3             Hscale3");
    CARD("%20lg%20lg%20lg%20lg",Prop_Z_F,Prop_Z_E,scale3,D2);
    //Rx
    COMMENT("#                 K4                  C4                  A4                  B4                  D4");
    CARD("%20lg%20lg%20lg%20lg%20lg",STIFF4,DAMP4,Acoeft4,Bcoeft4,Dcoeft4);
    COMMENT("# fct_ID14        H4  fct_ID24  fct_ID34  fct_ID44                     ThetaMin4           ThetaMax4");
    CARD("%10d%10d%10d%10d%10d          %20lg%20lg",FUN_A4,HFLAG4,FUN_B4,FUN_C4,FUN_D4,MIN_RUP4,MAX_RUP4);
    COMMENT("#                 F4                  E4             Ascale4             Hscale4");
    CARD("%20lg%20lg%20lg%20lg",Prop_Tor_F,Prop_Tor_E,scale4,Y0);
    //Ry
    COMMENT("#                 K5                  C5                  A5                  B5                  D5");
    CARD("%20lg%20lg%20lg%20lg%20lg",STIFF5,DAMP5,Acoeft5,Bcoeft5,Dcoeft5);
    COMMENT("# fct_ID15        H5  fct_ID25  fct_ID35  fct_ID45                     ThetaMin5           ThetaMax5");
    CARD("%10d%10d%10d%10d%10d          %20lg%20lg",FUN_A5,HFLAG5,FUN_B5,FUN_C5,FUN_D5,MIN_RUP5,MAX_RUP5);
    COMMENT("#                 F5                  E5             Ascale5             Hscale5");
    CARD("%20lg%20lg%20lg%20lg",Prop_FlxY_F,Prop_FlxY_E,scale5,Z0);
    //Rz
    COMMENT("#                 K6                  C6                  A6                  B6                  D6");
    CARD("%20lg%20lg%20lg%20lg%20lg",STIFF6,DAMP6,Acoeft6,Bcoeft6,Dcoeft6);
    COMMENT("# fct_ID16        H6  fct_ID26  fct_ID36  fct_ID46                     ThetaMin6           ThetaMax6");
    CARD("%10d%10d%10d%10d%10d          %20lg%20lg",FUN_A6,HFLAG6,FUN_B6,FUN_C6,FUN_D6,MIN_RUP6,MAX_RUP6);
    COMMENT("#                 F6                  E6             Ascale6             Hscale6");
    CARD("%20lg%20lg%20lg%20lg",Prop_FlxZ_F,Prop_FlxZ_E,scale6,D1);
    COMMENT("#  Fsmooth                Fcut");
    CARD("%10d%20lg",ISRATE,Asrate);
}
